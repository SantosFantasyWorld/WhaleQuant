

# BaoStock 技术面数据简介

证券宝（www.baostock.com）是一个免费、开源的证券数据平台，无需注册即可获取大量准确、完整的证券历史行情数据和上市公司财务数据。通过`Python` `API`获取数据信息，满足量化交易投资者、数量金融爱好者、计量经济从业者的数据需求。该工具包返回的数据格式为`pandas` `DataFrame`类型，方便使用`pandas`/`NumPy`/`Matplotlib`进行数据分析和可视化。此外，还支持将数据保存到本地进行分析，提供了更多的灵活性和便利性。

在该章节中，我们主要介绍了如何利用`BaoStock`获取历史A股K线数据、指数数据以及上证50成分股。

## 一、历史A股K线数据

历史A股K线数据是指中国A股市场中股票价格在一段时间内的开盘价、收盘价、最高价和最低价等信息，通常以图表的形式展示。这些数据对于投资者和分析师来说非常重要，因为它们可以通过分析股票价格的变化趋势和波动来预测未来的市场走势，并制定合适的投资策略。此外，历史K线数据还可以用于研究股票的历史表现、估值水平、市场风险等方面，为决策提供参考依据。

`query_history_k_data_plus`()：这个方法可以通过API接口获取A股的历史交易数据，你可以根据需要设置参数来获得日线、周线、月线以及5分钟、15分钟、30分钟和60分钟线的数据。这些数据可以结合均线数据进行选股和分析。返回的数据是`pandas`库中`DataFrame`类型的格式。数据范围从1990年12月19日至今，可以查询不复权、前复权或后复权数据。

### 1.1 日线使用示例

日线是股票、期货等市场中的一种技术分析图表，每个数据点代表一天的交易信息。它记录了该品种在一天内的开盘价、最高价、最低价和收盘价等数据，并通过连续的数据点形成一条曲线，以反映该品种价格的走势。

日线可以帮助投资者识别出股票或期货的价格趋势和支撑阻力位，判断未来价格走势的可能性，从而制定相应的投资策略。除此之外，日线还能够辅助投资者进行风险控制，识别出市场中的买卖信号，更好地把握交易机会。以下是通过调用`query_history_k_data_plus`()方法来对日线进行数据获取。

```python
import baostock as bs
import pandas as pd

#### 登陆系统 ####
lg = bs.login()
# 显示登陆返回信息
print('login respond error_code:'+lg.error_code)
print('login respond  error_msg:'+lg.error_msg)

#### 获取沪深A股历史K线数据 ####
# 详细指标参数，参见“历史行情指标参数”章节；“分钟线”参数与“日线”参数不同。“分钟线”不包含指数。
# 分钟线指标：date,time,code,open,high,low,close,volume,amount,adjustflag
# 周月线指标：date,code,open,high,low,close,volume,amount,adjustflag,turn,pctChg
rs = bs.query_history_k_data_plus("sh.600000",
    "date,code,open,high,low,close,preclose,volume,amount,adjustflag,turn,tradestatus,pctChg,isST",
    start_date='2022-07-01', end_date='2022-12-31',
    frequency="d", adjustflag="3")
print('query_history_k_data_plus respond error_code:'+rs.error_code)
print('query_history_k_data_plus respond  error_msg:'+rs.error_msg)

#### 打印结果集 ####
data_list = []
while (rs.error_code == '0') & rs.next():
    # 获取一条记录，将记录合并在一起
    data_list.append(rs.get_row_data())
result = pd.DataFrame(data_list, columns=rs.fields)

#### 结果集输出到csv文件 ####   
result.to_csv("./history_A_stock_k_data.csv", index=False)
print(result)

#### 登出系统 ####
bs.logout()
```

**返回结果示例**

| date | code       | open      | high   | low    | close  | preclose | volume | amount   | adjustflag     | turn | tradestatus | pctChg | isST      |
| ---- | ---------- | --------- | ------ | ------ | ------ | -------- | ------ | -------- | -------------- | ---- | ----------- | ------ | --------- |
| 0    | 2022-07-01 | sh.600000 | 8.0100 | 8.0400 | 7.9800 | 7.9900   | 8.0100 | 17846787 | 142651655.1700 | 3    | 0.060800    | 1      | -0.249700 |
| 1    | 2022-07-04 | sh.600000 | 7.9900 | 8.0000 | 7.9400 | 7.9600   | 7.9900 | 18222009 | 145047089.1700 | 3    | 0.062100    | 1      | -0.375500 |

具体步骤如下：

1. 首先导入需要用到的 `baostock` 和 `pandas` 库。
2. 使用 `bs.login()` 函数登录 Baostock 系统，并输出登录返回信息。该函数返回一个对象 `lg`，其中包含了登录返回的错误代码和错误信息。
3. 使用 `bs.query_history_k_data_plus()` 函数查询指定股票在指定时间范围内的 K 线数据，其中第一个参数为要查询的股票代码，第二个参数为要查询的 K 线数据字段列表，第三个参数为开始日期，第四个参数为结束日期，第五个参数为查询频率，第六个参数为复权类型。该函数返回一个对象 `rs`，其中包含了查询返回的错误代码和错误信息以及查询结果集。
4. 将查询结果集转换成 Pandas DataFrame 格式，并输出到 CSV 文件中。首先创建一个空列表 `data_list`，然后使用 `rs.next()` 循环获取查询结果集里的每一行数据，将每一行数据存入 `data_list` 列表中。最后使用 Pandas 的 `DataFrame` 函数将 `data_list` 转换成 `DataFrame` 格式并输出到 CSV 文件中。
5. 最后使用 `bs.logout()` 函数退出 `Baostock` 系统。

### 1.2 分钟线使用示例

分钟线指的是股票或其他交易品种的价格走势图，每根蜡烛图表示一定时间间隔内的开盘价、收盘价、最高价和最低价。例如，1分钟线表示每根蜡烛图代表1分钟的价格走势。分钟线对于交易者来说具有重要意义，可以帮助他们快速分析市场趋势和价格波动，做出更明智的交易决策。以下是通过调用`query_history_k_data_plus`()方法来对分钟线进行数据获取。

```python
import baostock as bs
import pandas as pd

#### 登陆系统 ####
lg = bs.login()
# 显示登陆返回信息
print('login respond error_code:'+lg.error_code)
print('login respond  error_msg:'+lg.error_msg)

#### 获取沪深A股历史K线数据 ####
# 详细指标参数，参见“历史行情指标参数”章节；“分钟线”参数与“日线”参数不同。“分钟线”不包含指数。
# 分钟线指标：date,time,code,open,high,low,close,volume,amount,adjustflag
# 周月线指标：date,code,open,high,low,close,volume,amount,adjustflag,turn,pctChg
rs = bs.query_history_k_data_plus("sh.600000",
    "date,time,code,open,high,low,close,volume,amount,adjustflag",
    start_date='2022-07-01', end_date='2022-07-31',
    frequency="5", adjustflag="3")
print('query_history_k_data_plus respond error_code:'+rs.error_code)
print('query_history_k_data_plus respond  error_msg:'+rs.error_msg)

#### 打印结果集 ####
data_list = []
while (rs.error_code == '0') & rs.next():
    # 获取一条记录，将记录合并在一起
    data_list.append(rs.get_row_data())
result = pd.DataFrame(data_list, columns=rs.fields)

#### 结果集输出到csv文件 ####   
result.to_csv("./history_A_stock_k_data.csv", index=False)
print(result)

#### 登出系统 ####
bs.logout()
```

**技术面参数解释** 

`code`：股票代码，这个参数用于指定查询的股票或指数代码，以及所在交易所。输入格式为 "交易所代码.股票代码" 或 "交易所代码.指数代码"。其中，交易所代码"sh"代表上海证券交易所，"sz"代表深圳证券交易所。如：sh.601398，此参数不可为空。

`fields`：这个参数用于指定返回数据中包含哪些指标，支持多指标输入，以半角逗号分隔，填写内容作为返回类型的列。详细指标列表见历史行情指标参数章节，日线与分钟线参数不同。此参数不可为空；

`start`：这个参数用于指定查询的起始日期，格式“`YYYY`-`MM`-`DD`”，如果不指定，则默认从2015-01-01开始查询。

`end`：这个参数用于指定查询的结束日期，格式为“`YYYY`-`MM`-`DD`”。如果不指定，则默认查询最近一个交易日的数据。

`frequency`：这个参数用于指定查询的数据类型。可以选择返回日线、周线、月线或分钟线的K线数据。其中，大写字母表示周期，如"D"代表日线，"W"代表周线，"M"代表月线，数字表示分钟线的周期，如"5"代表5分钟线，"15"代表15分钟线等。指数只支持日线数据。周线数据只能选择每周最后一个交易日查询，月线数据只能选择每月最后一个交易日查询。

`adjustflag`：这个参数用于指定查询数据是否需要进行复权处理。如果需要进行复权处理，则可以选择前复权或后复权。复权类型，默认不复权：3；1：后复权；2：前复权。已支持分钟线、日线、周线、月线前后复权。

**注意** 

对于日线数据的处理方法。因为在停牌期间没有交易，因此开盘价、最高价、最低价和收盘价都与前一个交易日的收盘价相同，成交量和成交额为0，换手率为空。

如果想将换手率转换为浮点数类型，则可以使用列表推导式，并将空字符串转换为0，最终将结果存储在"`dataframe`"（名为`result`）中的"`turn`"列中：

```Python
result["turn"] = [0 if x == "" else float(x) for x in result["turn"]]
```

**关于复权数据说明** 

复权数据是在股票交易中调整历史价格和成交量的数据，以考虑除权、除息等事件对价格和成交量的影响。复权数据的意义在于能够更准确地反映股票的实际表现，避免因为除权、除息等事件造成的误导性信息。通过使用复权数据，投资者可以更好地了解股票的历史价格走势和成交量变化，以做出更明智的投资决策。

`BaoStock`使用“涨跌幅复权法”对历史股价数据进行复权处理，以便更准确地计算资金收益率。该方法的优点是可以保证初始投入的资金运用率为100%，从而避免分红或配股对投资额的影响。

然而，不同的系统可能采用不同的复权方式，因此在比较不同系统提供的股票数据时，可能会发现存在差异。例如，同花顺、通达信等软件可能采用其他的复权方式，导致与`BaoStock`提供的数据不一致。

**返回结果数据**

| date | time       | code              | open      | high   | low    | close  | volume | amount | adjustflag   |
| ---- | ---------- | ----------------- | --------- | ------ | ------ | ------ | ------ | ------ | ------------ |
| 0    | 2022-07-01 | 20220701093500000 | sh.600000 | 8.0100 | 8.0400 | 8.0100 | 8.0200 | 814989 | 6540084.0000 |
| 1    | 2022-07-01 | 20220701094000000 | sh.600000 | 8.0100 | 8.0300 | 8.0100 | 8.0200 | 561500 | 4500107.0000 |

**返回数据说明**

| 参数名称    | 参数描述                                    | 算法说明                                                     |
| ----------- | ------------------------------------------- | ------------------------------------------------------------ |
| date        | 交易所行情日期                              |                                                              |
| code        | 证券代码                                    |                                                              |
| open        | 开盘价                                      |                                                              |
| high        | 最高价                                      |                                                              |
| low         | 最低价                                      |                                                              |
| close       | 收盘价                                      |                                                              |
| preclose    | 前收盘价                                    | 见表格下方详细说明                                           |
| volume      | 成交量（累计 单位：股）                     |                                                              |
| amount      | 成交额（单位：人民币元）                    |                                                              |
| adjustflag  | 复权状态(1：后复权， 2：前复权，3：不复权） |                                                              |
| turn        | 换手率                                      | [指定交易日的成交量(股)/指定交易日的股票的流通股总股数(股)]*100% |
| tradestatus | 交易状态(1：正常交易 0：停牌）              |                                                              |
| pctChg      | 涨跌幅（百分比）                            | 日涨跌幅=[(指定交易日的收盘价-指定交易日前收盘价)/指定交易日前收盘价]*100% |
| peTTM       | 滚动市盈率                                  | (指定交易日的股票收盘价/指定交易日的每股盈余TTM)=(指定交易日的股票收盘价*截至当日公司总股本)/归属母公司股东净利润TTM |
| pbMRQ       | 市净率                                      | (指定交易日的股票收盘价/指定交易日的每股净资产)=总市值/(最近披露的归属母公司股东的权益-其他权益工具) |
| psTTM       | 滚动市销率                                  | (指定交易日的股票收盘价/指定交易日的每股销售额)=(指定交易日的股票收盘价*截至当日公司总股本)/营业总收入TTM |
| pcfNcfTTM   | 滚动市现率                                  | (指定交易日的股票收盘价/指定交易日的每股现金流TTM)=(指定交易日的股票收盘价*截至当日公司总股本)/现金以及现金等价物净增加额TTM |
| isST        | 是否ST股，1是，0否                          |                                                              |

**注意“前收盘价”说明：** 

当股票在指定交易日发生除权除息时，其前收盘价的计算方法有所不同。一般而言，前收盘价是指前一个交易日的实际收盘价，但当股权登记日与分红现金数量、配送股数和配股价等因素相结合时，前收盘价需要根据一定的计算方法得出。具体来说，需要先计算除息价，然后再计算送红股后的除权价和配股后的除权价，最后得出除权除息价。这个除权除息价就是指定交易日的前收盘价。该价格由交易所计算并公布，而在首发日，则将首发价格作为前收盘价。

具体计算方法如下: 

1、***计算除息价***: 除息价=股息登记日的收盘价-每股所分红利现金额 

2、***计算除权价***: 送红股后的除权价=股权登记日的收盘价/(1+每股送红股数) 配股后的除权价=(股权登记日的收盘价+配股价*每股配股数)/(1+每股配股数) 

3、***计算除权除息价*** ：除权除息价=(股权登记日的收盘价-每股所分红利现金额+配股价*每股配股数)/(1+每股送红股数+每股配股数)

### 1.3 历史行情指标参数

**日线指标参数（包含停牌证券）**

日线指标参数是用来计算股票或其他证券在每个交易日结束时的技术指标。这些指标可以包括移动平均线、相对强弱指数（RSI）、随机指标（Stochastic Oscillator）等等。日线指标参数对于股票交易者和投资者来说非常重要，因为它们提供了有关证券价格变化、波动率和市场趋势的信息。这些指标可以帮助决策者制定买卖策略，并评估特定证券的风险和收益潜力。

| 参数名称    | 参数描述         | 说明                                |
| ----------- | ---------------- | ----------------------------------- |
| date        | 交易所行情日期   | 格式：YYYY-MM-DD                    |
| code        | 证券代码         | 格式：sh.600000。sh：上海，sz：深圳 |
| open        | 今开盘价格       | 精度：小数点后4位；单位：人民币元   |
| high        | 最高价           | 精度：小数点后4位；单位：人民币元   |
| low         | 最低价           | 精度：小数点后4位；单位：人民币元   |
| close       | 今收盘价         | 精度：小数点后4位；单位：人民币元   |
| preclose    | 昨日收盘价       | 精度：小数点后4位；单位：人民币元   |
| volume      | 成交数量         | 单位：股                            |
| amount      | 成交金额         | 精度：小数点后4位；单位：人民币元   |
| adjustflag  | 复权状态         | 不复权、前复权、后复权              |
| turn        | 换手率           | 精度：小数点后6位；单位：%          |
| tradestatus | 交易状态         | 1：正常交易 0：停牌                 |
| pctChg      | 涨跌幅（百分比） | 精度：小数点后6位                   |
| peTTM       | 滚动市盈率       | 精度：小数点后6位                   |
| psTTM       | 滚动市销率       | 精度：小数点后6位                   |
| pcfNcfTTM   | 滚动市现率       | 精度：小数点后6位                   |
| pbMRQ       | 市净率           | 精度：小数点后6位                   |
| isST        | 是否ST           | 1是，0否                            |

**周、月线指标参数**

周线和月线指标参数是用于技术分析的指标参数，通常用于股票、期货等市场的长期趋势分析。周线指标参数以每周为单位计算，而月线指标参数以每月为单位计算。这些指标通常包括均线、相对强弱指标和移动平均收敛/发散指标等。他能够在于帮助分析市场的长期趋势，辅助投资者做出投资决策。例如，当股票价格在周线或月线上出现明显的向上趋势时，可能会提示投资者买入该股票。反之，如果价格在这些时间段内呈现下跌趋势，则可能提示投资者卖出或避免购买该股票。

| 参数名称   | 参数描述         | 说明                                | 算法说明                                                     |
| ---------- | ---------------- | ----------------------------------- | ------------------------------------------------------------ |
| date       | 交易所行情日期   | 格式：YYYY-MM-DD                    |                                                              |
| code       | 证券代码         | 格式：sh.600000。sh：上海，sz：深圳 |                                                              |
| open       | 开盘价格         | 精度：小数点后4位；单位：人民币元   |                                                              |
| high       | 最高价           | 精度：小数点后4位；单位：人民币元   |                                                              |
| low        | 最低价           | 精度：小数点后4位；单位：人民币元   |                                                              |
| close      | 收盘价           | 精度：小数点后4位；单位：人民币元   |                                                              |
| volume     | 成交数量         | 单位：股                            |                                                              |
| amount     | 成交金额         | 精度：小数点后4位；单位：人民币元   |                                                              |
| adjustflag | 复权状态         | 不复权、前复权、后复权              |                                                              |
| turn       | 换手率           | 精度：小数点后6位；单位：%          |                                                              |
| pctChg     | 涨跌幅（百分比） | 精度：小数点后6位                   | 涨跌幅=[(区间最后交易日收盘价-区间首个交易日前收盘价)/区间首个交易日前收盘价]*100% |

**5、15、30、60分钟线指标参数(不包含指数)**

15、30、60分钟线指标参数是应用于股票或其他金融资产的技术分析中的时间周期参数，它们表示了图表上每根蜡烛的时间间隔。例如，15分钟线表示在图表上每个蜡烛代表了15分钟的价格走势。

这些时间周期参数对于短期交易者很有意义，因为它们可以帮助他们追踪较小的价格波动和市场变化，从而更好地制定买卖决策。同时，不同的时间周期参数也可以在一张图表上同时显示，以帮助交易者更全面地分析市场走势。

| 参数名称   | 参数描述       | 说明                                |
| ---------- | -------------- | ----------------------------------- |
| date       | 交易所行情日期 | 格式：YYYY-MM-DD                    |
| time       | 交易所行情时间 | 格式：YYYYMMDDHHMMSSsss             |
| code       | 证券代码       | 格式：sh.600000。sh：上海，sz：深圳 |
| open       | 开盘价格       | 精度：小数点后4位；单位：人民币元   |
| high       | 最高价         | 精度：小数点后4位；单位：人民币元   |
| low        | 最低价         | 精度：小数点后4位；单位：人民币元   |
| close      | 收盘价         | 精度：小数点后4位；单位：人民币元   |
| volume     | 成交数量       | 单位：股                            |
| amount     | 成交金额       | 精度：小数点后4位；单位：人民币元   |
| adjustflag | 复权状态       | 不复权、前复权、后复权              |

## 二、指数数据

指数数据是用来表示某个经济或金融市场的整体表现的数字指标，通常由一组代表该市场重要公司股票价格的股票指数构成。指数数据的意义在于让人们更好地了解市场的走势和趋势。它可以显示出市场整体的涨跌情况，帮助投资者评估其投资组合的表现，并作为制定投资决策的参考。此外，指数数据还可以被用来创建各种金融衍生品产品，例如期货和期权等。

我们可以通过API接口获取不同类型的指数K线数据，包括综合指数（如上证指数、深证综指）、规模指数（如上证50、沪深300）、行业指数（一级行业、二级行业等）、策略指数、成长指数、价值指数、主题指数、基金指数和债券指数。每种指数都有其对应的代码，例如上证指数的代码为sh.000001。下面将结合代码的形式，以沪深指数K线数据为例，进行讲解。

### 2.1 沪深指数K线数据

沪深指数K线数据是描述中国上海证券交易所和深圳证券交易所股市行情的一种图表表示方法。它通过显示每个交易周期（如日、周或月）的四个价格点：开盘价、最高价、最低价和收盘价，来展示股市的波动情况。

沪深指数K线数据对于投资者来说具有重要意义，因为它可以帮助他们更好地了解股市趋势和价格变动。通过分析K线数据，投资者可以制定更明智的投资决策，例如根据涨跌幅度和支撑位阻力位等技术指标进行买卖操作。

```python
import baostock as bs
import pandas as pd

# 登陆系统
lg = bs.login()
# 显示登陆返回信息
print('login respond error_code:'+lg.error_code)
print('login respond  error_msg:'+lg.error_msg)

# 获取指数(综合指数、规模指数、一级行业指数、二级行业指数、策略指数、成长指数、价值指数、主题指数)K线数据
# 综合指数，例如：sh.000001 上证指数，sz.399106 深证综指 等；
# 规模指数，例如：sh.000016 上证50，sh.000300 沪深300，sh.000905 中证500，sz.399001 深证成指等；
# 一级行业指数，例如：sh.000037 上证医药，sz.399433 国证交运 等；
# 二级行业指数，例如：sh.000952 300地产，sz.399951 300银行 等；
# 策略指数，例如：sh.000050 50等权，sh.000982 500等权 等；
# 成长指数，例如：sz.399376 小盘成长 等；
# 价值指数，例如：sh.000029 180价值 等；
# 主题指数，例如：sh.000015 红利指数，sh.000063 上证周期 等；

# 详细指标参数，参见“历史行情指标参数”章节；“周月线”参数与“日线”参数不同。
# 周月线指标：date,code,open,high,low,close,volume,amount,adjustflag,turn,pctChg
rs = bs.query_history_k_data_plus("sh.000001",
    "date,code,open,high,low,close,preclose,volume,amount,pctChg",
    start_date='2022-01-01', end_date='2022-06-30', frequency="d")
print('query_history_k_data_plus respond error_code:'+rs.error_code)
print('query_history_k_data_plus respond  error_msg:'+rs.error_msg)

# 打印结果集
data_list = []
while (rs.error_code == '0') & rs.next():
    # 获取一条记录，将记录合并在一起
    data_list.append(rs.get_row_data())
result = pd.DataFrame(data_list, columns=rs.fields)
# 结果集输出到csv文件
result.to_csv("./history_Index_k_data.csv", index=False)
print(result)

# 登出系统
bs.logout()
```

该代码使用`baostock`包获取中国A股股票市场上证指数（sh.000001）从2022年1月1日到2022年6月30日的历史日线K线数据。其中，`baostock`是一个提供金融数据的`Python`库。该代码中使用了`baostock`库中的`login()`函数、`query_history_k_data_plus()`函数和`logout()`函数，分别用于登录`baostock`系统、获取历史K线数据和退出`baostock`系统。具体参数含义可以参考函数注释或官方文档。

查询指数历史K线数据时，指定了上证指数（sh.000001）作为股票代码，以及起始日期和结束日期，并指定频率为日线。同时，指定了所需查询字段，包括日期（`date`）、股票代码（`code`）、开盘价（`open`）、最高价（`high`）、最低价（`low`）、收盘价（`close`）、昨收价（`preclose`）、成交量（`volume`）、成交金额（`amount`）和当日涨跌幅（`pctChg`）。

查询结果保存在一个`DataFrame`中，其中每一行代表一天的数据记录。最后将结果输出至.csv文件，并退出`baostock`系统。

**返回结果示例**

| date | time       | code              | open      | high   | low    | close  | volume | amount | adjustflag   |
| ---- | ---------- | ----------------- | --------- | ------ | ------ | ------ | ------ | ------ | ------------ |
| 0    | 2022-07-01 | 20220701093500000 | sh.600000 | 8.0100 | 8.0400 | 8.0100 | 8.0200 | 814989 | 6540084.0000 |
| 1    | 2022-07-01 | 20220701094000000 | sh.600000 | 8.0100 | 8.0300 | 8.0100 | 8.0200 | 561500 | 4500107.0000 |

**返回数据说明**

| 参数名称 | 参数描述       | 说明                                |
| -------- | -------------- | ----------------------------------- |
| date     | 交易所行情日期 | 格式：YYYY-MM-DD                    |
| code     | 证券代码       | 格式：sh.600000。sh：上海，sz：深圳 |
| open     | 今开盘价格     | 精度：小数点后4位；单位：人民币元   |
| high     | 最高价         | 精度：小数点后4位；单位：人民币元   |
| low      | 最低价         | 精度：小数点后4位；单位：人民币元   |
| close    | 今收盘价       | 精度：小数点后4位；单位：人民币元   |
| preclose | 昨日收盘价     | 精度：小数点后4位；单位：人民币元   |
| volume   | 成交数量       | 单位：股                            |
| amount   | 成交金额       | 精度：小数点后4位；单位：人民币元   |
| pctChg   | 涨跌幅         | 精度：小数点后6位                   |

## 三、上证50成分股

上证50成分股指的是上海证券交易所（Shanghai Stock Exchange）挑选出来的50家规模最大、流动性最好的公司，这些公司在中国A股市场中具有较高的影响力和代表性。上证50指数是由这些50家公司的股票组成的指数。这个指数通常被视为中国股市的核心指标之一，因为它覆盖了50家规模大、具有代表性的公司，在市场风险和涨跌幅方面具有重要的参考意义。此外，由于该指数的成分股通常由市值较大、经营稳定的公司组成，因此被认为是一种相对较为稳健的投资方式。

`query_sz50_stocks`()：这个方法通过API接口获取上证50成分股的信息，更新频率为每周一更新。这个方法返回一个`pandas`的`DataFrame`类型，即一个二维表格数据结构，其中包含了上证50成分股的详细信息。下面将结合代码对该方法进行讲解：

```Python
import baostock as bs # 导入 baostock 库
import pandas as pd   # 导入 pandas 库

# 登陆系统
lg = bs.login()  # 调用 login 方法进行登陆
# 显示登陆返回信息
print('login respond error_code:'+lg.error_code) # 打印登陆返回错误码
print('login respond  error_msg:'+lg.error_msg)  # 打印登陆返回错误信息

# 获取上证50成分股
rs = bs.query_sz50_stocks()  # 调用 query_sz50_stocks 方法获取上证50成分股信息
print('query_sz50 error_code:'+rs.error_code)  # 打印方法返回错误码
print('query_sz50  error_msg:'+rs.error_msg)   # 打印方法返回错误信息

# 打印结果集
sz50_stocks = []   # 创建一个空列表，用于存储查询结果
while (rs.error_code == '0') & rs.next():
    # 如果查询没有出错且还有数据
    sz50_stocks.append(rs.get_row_data())   # 将获取到的数据添加到列表中
result = pd.DataFrame(sz50_stocks, columns=rs.fields)  # 使用 pandas 将数据转换为 DataFrame 格式
# 结果集输出到csv文件
result.to_csv("D:/sz50_stocks.csv", encoding="gbk", index=False)  # 将结果保存为 csv 文件
print(result)   # 打印结果

# 登出系统
bs.logout()  # 调用 logout 方法进行登出
```

**参数含义** 

- `date`：查询日期，格式XXXX-XX-XX，为空时默认最新日期。

**返回示例数据**

| updateDate | code       | code_name |
| ---------- | ---------- | --------- |
| 0          | 2023-03-20 | sh.600010 |
| 1          | 2023-03-20 | sh.600028 |

**返回数据说明**

| 参数名称   | 参数描述 |
| ---------- | -------- |
| updateDate | 更新日期 |
| code       | 证券代码 |
| code_name  | 证券名称 |